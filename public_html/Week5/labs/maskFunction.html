<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>


        <input type="text" name="textInput"> 

        <div></div>

        <script>

            str = document.querySelector('input[name=textInput]');
            str.addEventListener('keyup', replaceFunc);
            str.addEventListener('focus', replaceOrig);
            str.addEventListener('blur', reFormat);

            let savedSSN = "";
            console.log(savedSSN);

            function replaceFunc()
            {
                let oldStr = str.value;
                let strReplace = /[^0-9]+/g;
                let newStr = oldStr.replace(strReplace, "");
                str.value = newStr;
            }

            function reFormat() {

                let ssnRe = /([0-9]{3})([0-9]{2})([0-9]{4})/;
                let ssn = str.value;
                savedSSN = ssn;
                let hiddenSSN = ssn.replace(ssnRe, '###-##-$3');

                str.value = hiddenSSN;

            }
            function replaceOrig() {
                str.value = savedSSN;
            }


        </script>
    </body>
</html>
